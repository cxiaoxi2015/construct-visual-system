<!DOCTYPE html>
<html lang="{$config.language}">
<head>
  <meta charset="utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="referrer" content="never">
<meta name="robots" content="noindex, nofollow">
<link rel="shortcut icon" href="/assets/img/favicon.ico">




<!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
<!--[if lt IE 9]>
  <script src="/assets/js/html5shiv.js"></script>
  <script src="/assets/js/respond.min.js"></script>
<![endif]-->
<script type="text/javascript">
    var require = {
        config:  {"site":{"name":"\u57ce\u4e61\u5efa\u8bbe\u78b3\u6392\u653e\u4fe1\u606f\u7ba1\u7406\u7cfb\u7edf","cdnurl":"","version":1685443326,"timezone":"Asia\/Shanghai","languages":{"backend":"zh-cn","frontend":"zh-cn"}},"upload":{"cdnurl":"","uploadurl":"\/back.php\/ajax\/upload","bucket":"local","maxsize":"10mb","mimetype":"jpg,png,bmp,jpeg,gif,zip,rar,xls,xlsx,wav,mp4,mp3,pdf","chunking":false,"chunksize":2097152,"savekey":"\/uploads\/{year}{mon}{day}\/{filemd5}{.suffix}","multipart":[],"multiple":false,"storage":"local"},"modulename":"admin","controllername":"index","actionname":"login","jsname":"backend\/index","moduleurl":"\/back.php","language":"zh-cn","referer":null,"__PUBLIC__":"\/","__ROOT__":"\/","__CDN__":""}    };
</script>




<link href="/assets/css/backend.css?v=1685443326" rel="stylesheet">




  <title>城乡建设领域碳排放监测管理平台</title>
  <link rel="stylesheet" href="/v4/css/reset.css">
  <link rel="stylesheet" href="/v4/css/iconfont.css">
  <link rel="stylesheet" href="/v4/css/elementUI.css">
  <link rel="stylesheet" href="/v4/css/index.css">
  <link rel="stylesheet" href="/v4/css/page/login.css">

<style type="text/css">
  .login-box {
    top: 0%;
  }
.toast-top-center {
  font-size:14px;
  top: 50px;
}
</style>



</head>
<body>
<div id="loginCanvas"></div>
<div class="bg-building"></div>
<div class="bg-grid"></div>
<div id="app">
  <div class="login-header">
    <div class="login-header-left">城乡建设领域碳排放监测管理平台</div>
    <div class="login-header-right"></div>
  </div>
  <div class="login-header-line"></div>



  <div class="login-box">
    <div class="login-box-title">城乡建设领域碳排放监测管理平台</div>


<form action="" method="post" id="login-form">
{:token()}
    <div class="login-box-form">
      <div class="login-input form-item">
        <div class="form-item-shadow">
          <div class="shadow-line shadow-line-top"></div>
          <div class="shadow-line shadow-line-right"></div>
          <div class="shadow-line shadow-line-bottom"></div>
          <div class="shadow-line shadow-line-left"></div>
        </div>
        <div class="prefix-icon"></div>
        <input type="text"
          name="username"   id="pd-form-username"  autocomplete="off"  value=""  data-rule="{:__('Username')}:required;username"
               class="form-item-input"
               :placeholder="usernamePlaceholder"
               @focus="usernamePlaceholder = ''"
               @blur="usernamePlaceholder = '请输入用户名'" />
      </div>
      <div class="login-password form-item">
        <div class="form-item-shadow">
          <div class="shadow-line shadow-line-top"></div>
          <div class="shadow-line shadow-line-right"></div>
          <div class="shadow-line shadow-line-bottom"></div>
          <div class="shadow-line shadow-line-left"></div>
        </div>
        <div class="prefix-icon"></div>
        <input type="password"
        name="password"  id="pd-form-password"   autocomplete="off" value=""   data-rule="{:__('Password')}:required;password"
               class="form-item-input"
               :placeholder="passwordPlaceholder"
               @focus="passwordPlaceholder = ''"
               @blur="passwordPlaceholder = '请输入密码'" />
      </div>

{if $Think.config.fastadmin.login_captcha}
      <div class="login-verify">
        <div class="login-verify-input form-item">
          <div class="form-item-shadow">
            <div class="shadow-line shadow-line-top"></div>
            <div class="shadow-line shadow-line-right"></div>
            <div class="shadow-line shadow-line-bottom"></div>
            <div class="shadow-line shadow-line-left"></div>
          </div>
          <div class="prefix-icon"></div>
          <input type="text"
          name="captcha"   data-rule="{:__('Captcha')}:required;length(4)"  autocomplete="off"
                 class="form-item-input"
                 :placeholder="verifyCodePlaceholder"
                 @focus="verifyCodePlaceholder = ''"
                 @blur="verifyCodePlaceholder = '请输入验证码'" />
        </div>
        <div class="login-verify-img">
  <img src="{:rtrim('__PUBLIC__', '/')}/index.php?s=/captcha"  onclick="this.src = '{:rtrim('__PUBLIC__', '/')}/index.php?s=/captcha&r=' + Math.random();"   style="position:absolute; width:106px; height:48px;" />
        </div>
      </div>
  {/if}

      <div class="login-phone form-item">
        <div class="form-item-shadow">
          <div class="shadow-line shadow-line-top"></div>
          <div class="shadow-line shadow-line-right"></div>
          <div class="shadow-line shadow-line-bottom"></div>
          <div class="shadow-line shadow-line-left"></div>
        </div>
        <div class="prefix-icon"></div>
        <input class="form-item-input"
               v-model="phoneNum"
               :placeholder="phonePlaceholder"
               maxlength="11"
               oninput="onPhoneNumInput(this)"
               @focus="phonePlaceholder = ''"
               @blur="phonePlaceholder = '请输入手机号'" />
      </div>
      <div class="login-verify login-verify-phone">
        <div class="login-verify-input form-item">
          <div class="form-item-shadow">
            <div class="shadow-line shadow-line-top"></div>
            <div class="shadow-line shadow-line-right"></div>
            <div class="shadow-line shadow-line-bottom"></div>
            <div class="shadow-line shadow-line-left"></div>
          </div>
          <div class="prefix-icon"></div>
          <input type="text"
                 class="form-item-input"
                 :placeholder="phoneVerifyCodePlaceholder"
                 @focus="phoneVerifyCodePlaceholder = ''"
                 @blur="phoneVerifyCodePlaceholder = '请输入短信验证码'" />
        </div>
        <div class="verify-get-button"
             :class="{ 'verify-get-button__disabled': getVerifyCodeButtonDisabled }"
             @click="handleGetPhoneVerifyCode">{{ verifyCodeButtonText }}</div>
      </div>


      <div class="login-action" onclick="login()">登 录</div>





    </div>
  </form>




  </div>





  <div class="logo">
    <img class="logo-img" src="/v4/assets/images/login/logo.png" />
    <div class="logo-text">住房和城乡建设部科技与产业化发展中心</div>
  </div>
</div>

<script src="/v4/js/vue.min.js"></script>
<script src="/v4/js/element.js"></script>
<script src="/v4/js/jquery.min.js"></script>
<script src="/v4/js/particles.min.js"></script>
<script src="/v4/js/config.js"></script>
<script>




  particlesJS('loginCanvas', {
    "particles": {
      "number": {"value": 40, "density": {"enable": true, "value_area": 800}},
      "color": {"value": "#ffffff"},
      "shape": {
        "type": "circle",
        "stroke": {"width": 0, "color": "#000000"},
        "polygon": {"nb_sides": 5},
        "image": {"src": "img/github.svg", "width": 100, "height": 100}
      },
      "opacity": {
        "value": 0.7,
        "random": false,
        "anim": {"enable": false, "speed": 1, "opacity_min": 0.1, "sync": false}
      },
      "size": {"value": 3, "random": true, "anim": {"enable": false, "speed": 40, "size_min": 0.1, "sync": false}},
      "line_linked": {"enable": true, "distance": 150, "color": "#ffffff", "opacity": 0.6, "width": 1},
      "move": {
        "enable": true,
        "speed": 6,
        "direction": "none",
        "random": false,
        "straight": false,
        "out_mode": "out",
        "bounce": false,
        "attract": {"enable": false, "rotateX": 600, "rotateY": 1200}
      }
    },
    "interactivity": {
      "detect_on": "canvas",
      "events": {
        "onhover": {"enable": true, "mode": "grab"},
        "onclick": {"enable": true, "mode": "push"},
        "resize": true
      },
      "modes": {
        "grab": {"distance": 200, "line_linked": {"opacity": 1}},
        "bubble": {"distance": 400, "size": 40, "duration": 2, "opacity": 8, "speed": 3},
        "repulse": {"distance": 200, "duration": 0.4},
        "push": {"particles_nb": 4},
        "remove": {"particles_nb": 2}
      }
    },
    "retina_detect": false
  });
</script>
<script>
function login() {
  $("#login-form").submit()
}





  $(function () {
    const reset = ele => {
      $('.shadow-line-top').css({ top: 0, left: 0, width: 0, height: 0, opacity: 0 })
      $('.shadow-line-right').css({ top: '2px', right: 0, width: 0, height: 0, opacity: 0  })
      $('.shadow-line-bottom').css({ bottom: 0, right: '2px', width: 0, height: 0, opacity: 0  })
      $('.shadow-line-left').css({ bottom: '2px', left: 0, width: 0, height: 0, opacity: 0  })
    }
    $('.form-item-input').on('focus', function () {
      const ele = $(this).parent('.form-item');
      $('.form-item__focus').removeClass('form-item__focus');
      ele.addClass('form-item__focus')
      reset(ele);
      setTimeout(() => {
        const top = ele.find('.shadow-line-top'),
                right = ele.find('.shadow-line-right'),
                bottom = ele.find('.shadow-line-bottom'),
                left = ele.find('.shadow-line-left')
        top.css({ height: '2px' })
        top.animate({ width: '100%', opacity: 0.8 }, 100, function () {
          right.css({ width: '2px', opacity: 0.8 })
          right.animate({ height: '0.6rem', opacity: 0.8 }, 100, function () {
            bottom.css({ height: '2px' })
            bottom.animate({ width: '98%', opacity: 0.8 }, 100, function () {
              left.css({ width: '2px' })
              left.animate({ height: '0.58rem', opacity: 0.8 }, 100)
            })
          })
        })
      }, 200)
    }).on('blur', function () {
      const ele = $(this).parent('.form-item');
      $('.form-item__focus').removeClass('form-item__focus');
      reset();
    })
  })
  const myApp = new Vue({
      el: "#app",
      data: {
          usernamePlaceholder: "请输入用户名",
          passwordPlaceholder: "请输入密码",
          verifyCodePlaceholder: "请输入验证码",
          phonePlaceholder: "请输入手机号",
          phoneVerifyCodePlaceholder: "请输入短信验证码",
          phoneNum: "",
          verifyCodeButtonText: "获取验证码",
          getVerifyCodeButtonDisabled: false,
          countdown: 60
      },
      methods: {
          /**
           * 获取验证码
           */
          handleGetPhoneVerifyCode() {
              if (this.getVerifyCodeButtonDisabled) {
                  return;
              }
              if (!this.phoneNum) {
                  return this.$message.warning("请输入手机号后获取验证码")
              }
              const regExp = /^1[3-9]\d{9}$/;
              if (!regExp.test(this.phoneNum)) {
                  return this.$message.warning("您输入的手机号有误,请重新输入")
              }
              this.handleCountDown(this.countdown);
          },

          handleCountDown(countdown) {
              if (countdown) {
                  sessionStorage.setItem("countDown", countdown)
              }
              if (this.countdown === 0) {
                  sessionStorage.removeItem("countDown")
                  this.getVerifyCodeButtonDisabled = false;
                  this.verifyCodeButtonText = "获取验证码";
                  this.countdown = 60;
                  return;
              } else {
                  this.getVerifyCodeButtonDisabled = true;
                  this.verifyCodeButtonText = `重新发送(${this.countdown}s)`;
                  this.countdown--;
              }
              setTimeout(() => {
                  this.handleCountDown(this.countdown)
              }, 1000)
          }
      },
      mounted() {
          const countDown = sessionStorage.getItem("countDown")
          if (countDown) {
              this.countdown = parseInt(countDown);
              this.verifyCodeButtonText = `重新发送(${this.countdown}s)`;
              this.handleCountDown();
          }
      }
  })

  function onPhoneNumInput(input) {
      const maxLength = parseInt(input.getAttribute("maxlength"));
      if (input.value.length > maxLength) {
          input.value = input.value.slice(0, maxLength);
      }
  }
</script>

{include file="common/script" /}
</body>
</html>
