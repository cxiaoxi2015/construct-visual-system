<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>城乡建设领域碳排放监测管理平台</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/iconfont.css">
    <link rel="stylesheet" href="../css/elementUI.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/page/xianzhuang.css">
</head>
<body>
    <div id="app">
        <div class="mask" v-show="showMask"></div>
        <div class="sys-title">城乡建设领域碳排放监测管理平台</div>

        <!-- header -->
        <div class="sys-header">
            <div class="home" @click="handleHomeClick">
                <div class="home-icon iconfont">&#xe751;</div>
                <span class="home-text">首页</span>
            </div>
            <div class="nav">
                <ul class="nav-left">
                    <li v-for="(item, index) in navLeft"
                        :class="[item.navName, item.active && 'nav-active']"
                        :key="index"
                        @click="handleNavClick(item)">
                        <div class="nav-icon"></div>
                        <div class="nav-name">{{ item.name }}</div>
                    </li>
                </ul>
                <div class="sys-title-placeholder"></div>
                <ul class="nav-right">
                    <li v-for="(item, index) in navRight" :class="[item.active && 'nav-active', item.navName]" :key="index" @click="handleNavClick(item)">
                        <div class="nav-icon"></div>
                        <div class="nav-name" v-if="item.name.length <= 4">{{ item.name }}</div>
                        <dl class="nav-name" v-else>
                            <dt>{{ item.name.substring(0, 4) }}</dt>
                            <dd>{{ item.name.substring(4) }}</dd>
                        </dl>
                    </li>
                </ul>
            </div>
            <div class="header-right-line"></div>
            <div class="header-right">
                <div class="header-right-top">
                    <img class="avatar" src="https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png" />
                    <div class="text">
                        <a>{{ userName }}</a>
                        <div class="icon-wrap">
                            <div class="iconfont" title="全屏" @click="fullScreenClick">&#xe607;</div>
                            <div class="iconfont" title="模型" @click="modelClick">&#xe667;</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 年度切换 -->
        <div class="sys-toggle-area">
            <div class="year-group">
                <div class="label">年度</div>
                <div class="cx-select">
                    <div class="cx-select-input">
                        {{ year }}
                        <div class="cx-select-suffix iconfont">&#xe64b;</div>
                    </div>
                    <ul class="cx-option">
                        <li v-for="yearDate in yearOptions" :class="[yearDate === year && 'year-active']" :key="yearDate" @click="handleYearClick(yearDate)">{{ yearDate }}</li>
                    </ul>
                </div>
            </div>
            <div class="energy-group">
                <div :class="cateLeftBtnClass"
                     @click="handleCateClick('1')">用能</div>
                <div :class="cateRightBtnClass"
                     @click="handleCateClick('2')">排放</div>
            </div>
            <div class="area-line"></div>
            <div class="area-group" v-if="region === 'china'">
                <div :class="leftBtnClass" @click="handleDqClick('1')">全国</div>
                <div :class="rightBtnClass" @click="handleDqClick('2')">各地</div>
            </div>
            <div class="cx-placeholder">
                <div class="analyse" @click="handleCompareAnalysisClick">
                    <div class="analyse-icon"></div>
                    <div class="analyse-text">对比分析</div>
                </div>
            </div>
        </div>

        <!-- 系统内容部分 -->
        <div class="container">
            <div class="layout-ele">
                <div class="xz-item">
                    <div class="collapse-item-wrap">
                        <div class="xz-item-title collapse-item">
                            {{ leftTopTitle }}
                            <div class="collapse-item-btn"
                                 :class="[{ 'is-collapsed': collapseNHZL }, 'collapseNHZL']"
                                 @click="handleCollapseClick('NHZL')">
                                <span class="iconfont">&#xe622;</span>
                                {{ collapseYNZB ? '展开' : '收起' }}
                            </div>
                        </div>
                        <div class="chart-container" id="nhzl" v-if="loadChart.NHZL"></div>
                    </div>
                </div>
                <div class="xz-item">
                    <div class="collapse-item-wrap">
                        <div class="xz-item-title collapse-item">
                            {{ leftMiddleTitle }}
                            <div class="collapse-item-btn"
                                 :class="[{ 'is-collapsed': collapseYNZB }, 'collapseYNZB']"
                                 @click="handleCollapseClick('YNZB')">
                                <span class="iconfont">&#xe622;</span>
                                {{ collapseYNZB ? '展开' : '收起' }}
                            </div>
                        </div>
                        <div class="chart-container" id="ynzb" v-if="loadChart.YNZB"></div>
                    </div>
                </div>
                <div class="xz-item">
                    <div class="collapse-item-wrap">
                        <div class="xz-item-title collapse-item">
                            {{ leftBottomTitle }}
                            <div class="collapse-item-btn"
                                 :class="[{ 'is-collapsed': collapseYNZS }, 'collapseYNZS']"
                                 @click="handleCollapseClick('YNZS')">
                                <span class="iconfont">&#xe622;</span>
                                {{ collapseYNZS ? '展开' : '收起' }}
                            </div>
                        </div>
                        <div class="chart-container" id="ynzs" v-if="loadChart.YNZS"></div>
                    </div>
                </div>
            </div>
            <div class="layout-ele">
                <div class="map-wrap">
                    <div class="energy-consumption">
                        <div class="energy-consumption-title">{{ mapTitle }}</div>
                        <div class="energy-consumption-value">
                            <div class="value-item" v-for="(item, index) in mapValue" :key="index">{{ item }}</div>
                        </div>
                        <div class="energy-consumption-suffix">{{ mapUnit }}</div>
                    </div>
                    <div class="map-back" v-show="region !== 'china'" @click="handleMapChina">返回全国</div>
                    <div class="map" id="mapContainer"></div>
                </div>
                <div class="category">
                    <div class="category-item"
                         :class="[
                            item.value === type && 'category-item--active',
                            item.size === 'small' && 'category-item-small'
                         ]"
                         v-for="(item, index) in categories"
                         :key="index"
                         @click="handleCategoryClick(item)">{{ item.categoryName }}</div>
                </div>
            </div>
            <div class="layout-ele">
                <div class="xz-item">
                    <div class="collapse-item-wrap">
                        <div class="xz-item-title collapse-item in-right">
                            {{ rightTopTitle }}
                            <div class="collapse-item-btn"
                                 :class="[{ 'is-collapsed': collapseYNJG }, 'collapseYNJG']"
                                 @click="handleCollapseClick('YNJG')">
                                <span class="iconfont">&#xe622;</span>
                                {{ collapseYNJG ? '展开' : '收起' }}
                            </div>
                        </div>
                        <div class="chart-container" id="ynjg" v-if="loadChart.YNJG"></div>
                    </div>
                </div>
                <div class="xz-item">
                    <div class="collapse-item-wrap">
                        <div class="xz-item-title collapse-item in-right">
                            {{ rightMiddleTitle }}
                            <div class="collapse-item-btn"
                                 :class="[{ 'is-collapsed': collapseDQHL }, 'collapseDQHL']"
                                 @click="handleCollapseClick('DQHL')">
                                <span class="iconfont">&#xe622;</span>
                                {{ collapseDQHL ? '展开' : '收起' }}
                            </div>
                        </div>
                        <div class="chart-container" id="dqhl" v-if="loadChart.DQHL"></div>
                    </div>
                </div>
                <div class="xz-item">
                    <div class="collapse-item-wrap">
                        <div class="xz-item-title collapse-item in-right">
                            {{ rightBottomTitle }}
                            <div class="collapse-item-btn"
                                 :class="[{ 'is-collapsed': collapseYNQD }, 'collapseYNQD']"
                                 @click="handleCollapseClick('YNQD')">
                                <span class="iconfont">&#xe622;</span>
                                {{ collapseYNQD ? '展开' : '收起' }}
                            </div>
                        </div>
                        <div class="chart-toggle-group" style="right: 0.25rem;">
                            <div class="group-item"
                                 :class="[mold === 1 && 'group-item--active']"
                                 @click="handleYNQDToggle(1)">人均</div>
                            <div class="group-item"
                                 :class="[mold === 2 && 'group-item--active']"
                                 @click="handleYNQDToggle(2)">面均</div>
                        </div>
                        <div class="chart-container" id="ynqd" v-if="loadChart.YNQD"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/vue.min.js"></script>
    <script src="../js/element.js"></script>
    <script src="../js/jquery.min.js"></script>
    <script src="../js/select.js"></script>
    <script src="../js/echarts.min.js"></script>
    <script src="../js/moment.min.js"></script>
    <script src="../js/china.js"></script>
    <script src="../js/config.js"></script>
    <script>
        const myApp = new Vue({
            el: "#app",
            data: {
                userName: "管理员",
                navList: [
                    {
                        navName: "xianzhuang",
                        name: "现状",
                        location: 'xianzhuang.html',
                        active: true
                    },
                    {
                        navName: "yuce",
                        name: "预测",
                        location: 'yuce.html'
                    },
                    {
                        navName: "diaodu",
                        name: "调度",
                        location: 'diaodu.html'
                    },
                    {
                        navName: "kaoping",
                        name: "评价",
                        location: 'kaoping.html'
                    },
                    {
                        navName: "jianzhu",
                        name: "重点建筑监管",
                        location: "jianzhu.html"
                    },
                    {
                        navName: "hangye",
                        name: "重点行业监管",
                        location: "hangye.html"
                    },
                    {
                        navName: "chanpin",
                        name: "技术产品",
                        location: 'chanpin.html'
                    },
                    {
                        navName: "chaxun",
                        name: "数据查询",
                        location: 'data-query.html'
                    }
                ],
                year: "",
                type: 100,
                categories: [
                    { categoryName: "城乡建设领域", value: 100, size: "medium" },
                    { categoryName: "建筑运行", value: 10, size: "medium" },
                    { categoryName: "城镇居建", value: 1, size: "small" },
                    { categoryName: "公共建筑", value: 2, size: "small" },
                    { categoryName: "农村居建", value: 3, size: "small" },
                    { categoryName: "集中供暖", value: 4, size: "small" },
                    { categoryName: "建筑业", value: 20, size: "medium" },
                    { categoryName: "基础设施", value: 30, size: "medium" }
                ],
                // 用能强度
                mold: 1,
                region: 'china',
                leftBtnClass: '',
                rightBtnClass: '',
                cateLeftBtnClass: "",
                cateRightBtnClass: "",
                collapseYNZB: true,
                collapseNHZL: true,
                collapseYNZS: true,
                collapseYNJG: true,
                collapseDQHL: true,
                collapseYNQD: true,
                showMask: false,
                loadChart: {
                    YNZB: true,
                    NHZL: true,
                    YNZS: true,
                    YNJG: true,
                    DQHL: true,
                    YNQD: true
                },
                resData: {},
                mapTitle: "",
                mapUnit: "",
                mapValue: "",
                cate: "2",
                dq: "1",
                leftTopTitle: "",
                leftMiddleTitle: "",
                leftBottomTitle: "",
                rightTopTitle: "",
                rightMiddleTitle: "",
                rightBottomTitle: ""
            },
            methods: {
                handleYearClick(yearDate) {
                    this.year = yearDate;
                    const ele = $('.cx-select');
                    ele.find('.cx-option').slideUp();
                    ele.hasClass('focus')
                        ? ele.removeClass('focus')
                        : ele.addClass('focus')
                    this.handleChange();
                },

                handleCategoryClick({ value }) {
                    this.type = value;
                    this.handleChange();
                },

                /**
                 * 绘制能耗总量图表
                 */
                drawNHZLChart(showDataZoom = true) {
                    const colorList = [
                        {
                            offset0: "#F5804D",
                            offset1: "#FCCB05"
                        },
                        {
                            offset0: "#6851F1",
                            offset1: "#248FF7"
                        },
                    ]
                    const { left_top } = this.resData;
                    if (!left_top) {
                        return;
                    }
                    const { dw, legend, title, x_name, y_data } = left_top;
                    this.leftTopTitle = title;

                    const series = legend.map((name, index) => {
                        return {
                            name,
                            type: "bar",
                            barWidth: 11,
                            itemStyle: {
                                borderWidth: 2,
                                color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [
                                    {
                                        offset: 0,
                                        color: colorList[index].offset0
                                    },
                                    {
                                        offset: 1,
                                        color: colorList[index].offset1
                                    }
                                ]),
                                borderRadius: 3
                            },
                            data: y_data[index]
                        }
                    })
                    const chartContainer = document.getElementById('nhzl');
                    chartContainer.removeAttribute('_echarts_instance_');
                    const myChart = echarts.init(chartContainer);
                    const dataZoom = showDataZoom && [
                        {
                            type: 'slider',
                            startValue: 0,
                            endValue: 7,
                            bottom: '20',
                            left: '30',
                            height: 10,
                            borderColor: '#1479A1',
                            textStyle: {
                                color: '#05D5FF',
                            },
                            backgroundColor: '#032E5C',
                            dataBackground: {
                                lineStyle: { color: 'rgba(250, 84, 28, .3)' },
                                areaStyle: { color: 'rgba(250, 84, 28, .5)' }
                            },
                            moveHandleStyle: {
                                color: 'rgba(38, 203, 251, 1)',
                                borderColor: 'rgba(38, 203, 251, 1)'
                            },
                            fillerColor: 'rgba(250, 84, 28, .1)'
                        }
                    ]
                    const option = {
                        backgroundColor:  'transparent',
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            },
                            confine: true
                        },
                        grid: {
                            top: showDataZoom ? '25%' : '20%',
                            left: showDataZoom ? '5%' : '2%',
                            right: showDataZoom ?'5%' : '2%',
                            bottom: showDataZoom ? '15%' : '10%',
                            containLabel: true
                        },
                        legend: {
                            x: 'right',
                            y: 'top',
                            padding: [20, 10, 0, 0],
                            itemGap: 10,
                            data: legend,
                            textStyle: {
                                color: '#fff',
                                fontSize: '.12rem'
                            },
                            itemWidth: 10,
                            itemHeight: 4,
                            icon: "rectangle"
                        },
                        xAxis: [
                            {
                                type: "category",
                                axisTick: {
                                    show: false,
                                },
                                axisLine: {
                                    lineStyle: {
                                        color: 'rgba(255, 255, 255, .05)'
                                    }
                                },
                                data: x_name,
                                axisLabel: {
                                    margin: 10,
                                    fontSize: '.1rem',
                                    formatter: "{value}",
                                    color: '#fff',
                                    rotate: 45
                                },
                            },
                        ],
                        yAxis: [
                            {
                                type: "value",
                                name: `单位：${dw}`,
                                nameTextStyle: {
                                    color: "#fff",
                                    fontSize: "",
                                    padding: [0, 0, 0, 0],
                                },
                                show: true,
                                axisTick: {
                                    show: false,
                                },
                                axisLine: {
                                    show: false,
                                },
                                splitLine: {
                                    show: true,
                                    lineStyle: {
                                        color: "rgba(255, 255, 255, .09)"
                                    }
                                },
                                axisLabel: {
                                    fontSize: '.12rem',
                                    color: '#fff'
                                }
                            },
                        ],
                        dataZoom,
                        series
                    };
                    myChart.setOption(option)
                },

                /**
                 * 绘制用能占比图表
                 */
                drawYNZBChart(showDataZoom = true) {
                    const { left_middle } = this.resData;
                    if (!left_middle) {
                        return;
                    }
                    const { dw, title, legend, x_name, y_data } = left_middle;
                    this.leftMiddleTitle = title;
                    const chartContainer = document.getElementById('ynzb');
                    chartContainer.removeAttribute('_echarts_instance_');
                    const myChart = echarts.init(chartContainer);
                    const dataZoom = showDataZoom && [
                        {
                            show: showDataZoom,
                            type: 'slider',
                            startValue: 0,
                            endValue: 7,
                            bottom: '20',
                            left: '30',
                            height: 10,
                            borderColor: '#1479A1',
                            textStyle: {
                                color: '#05D5FF',
                            },
                            backgroundColor: '#032E5C',
                            dataBackground: {
                                lineStyle: { color: 'rgba(250, 84, 28, .3)' },
                                areaStyle: { color: 'rgba(250, 84, 28, .5)' }
                            },
                            moveHandleStyle: {
                                color: 'rgba(38, 203, 251, 1)',
                                borderColor: 'rgba(38, 203, 251, 1)'
                            },
                            fillerColor: 'rgba(250, 84, 28, .1)'
                        }
                    ]
                    const colorList = ["#ffd918", "#00dcff"];
                    const series = legend.map((name, index) => {
                        return {
                            name,
                            data: y_data[index],
                            type: 'line',
                            smooth: true,
                            lineStyle: {
                                color:  colorList[index]
                            },
                            symbolSize: 5,
                            symbol: 'circle',
                            itemStyle: {
                                barBorderRadius: [30, 30, 0, 0],
                                color: colorList[index],
                                borderColor: '#fff'
                            }
                        }
                    })
                    const option = {
                        backgroundColor: 'transparent',
                        tooltip: {
                            trigger: 'axis',
                            confine: true,
                            // extraCssText: "background-color: transparent; padding: 0 5px; border-color: transparent;",
                            formatter: function(params) {
                                let relVal = `${params[0].name}`;
                                let prefix
                                for (let i = 0, l = params.length; i < l; i++) {
                                    prefix = `<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color: ${params[i].color}"></span>`
                                    relVal += '<br/>' + prefix + `增速率` + ' : ' + `${params[i].value} ${dw}`;
                                }
                                return relVal;
                            },
                            axisPointer: {
                                type: 'cross',
                                crossStyle: {
                                    color: '#fff'
                                },
                                lineStyle: {
                                    type: 'dashed'
                                }
                            }
                        },
                        legend: {
                            x: 'right',
                            y: 'top',
                            padding: [20, 10, 0, 0],
                            itemGap: 10,
                            data: legend,
                            textStyle: {
                                color: '#fff',
                                fontSize: '.12rem'
                            },
                            itemWidth: 10,
                            itemHeight: 4,
                            icon: "rectangle"
                        },
                        grid: {
                            top: '20%',
                            left: showDataZoom ? '5%' : '2%',
                            right: showDataZoom ?'5%' : '2%',
                            bottom: '15%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: x_name,
                            axisTick: {
                                show: false,
                            },
                            axisLine: {
                                lineStyle: {
                                    color: 'rgba(255, 255, 255, .05)'
                                }
                            },
                            axisLabel: {
                                margin: 10,
                                fontSize: '.1rem',
                                formatter: "{value}",
                                color: '#fff',
                                rotate: 45
                            }
                        },
                        yAxis: {
                            type: "value",
                            name: `单位：${dw}`,
                            nameTextStyle: {
                                color: "#fff",
                                fontSize: "",
                                padding: [0, 0, 0, -30],
                            },
                            show: true,
                            axisTick: {
                                show: false,
                            },
                            axisLine: {
                                show: false,
                                lineStyle: {
                                    color: "rgba(255, 255, 255, .09)"
                                }
                            },
                            splitLine: {
                                show: true,
                                lineStyle: {
                                    color: "rgba(255, 255, 255, .09)"
                                }
                            },
                            axisLabel: {
                                fontSize: '.12rem',
                                color: '#fff'
                            }
                        },
                        dataZoom,
                        series
                    };
                    myChart.setOption(option)
                },

                /**
                 * 绘制用能增速图表
                 */
                drawYNZSChart(showDataZoom = true) {
                    const { left_bottom } = this.resData;
                    if (!left_bottom) {
                        return;
                    }
                    const { dw, legend, title, max, x_name, y_data } = left_bottom;
                    this.leftBottomTitle = title;
                    const chartContainer = document.getElementById('ynzs');
                    chartContainer.removeAttribute('_echarts_instance_');
                    const myChart = echarts.init(chartContainer);
                    const dataZoom = showDataZoom && [
                        {
                            type: 'slider',
                            startValue: 0,
                            endValue: 7,
                            bottom: '20',
                            left: '30',
                            height: 10,
                            borderColor: '#1479A1',
                            textStyle: {
                                color: '#05D5FF',
                            },
                            backgroundColor: '#032E5C',
                            dataBackground: {
                                lineStyle: { color: 'rgba(250, 84, 28, .3)' },
                                areaStyle: { color: 'rgba(250, 84, 28, .5)' }
                            },
                            moveHandleStyle: {
                                color: 'rgba(38, 203, 251, 1)',
                                borderColor: 'rgba(38, 203, 251, 1)'
                            },
                            fillerColor: 'rgba(250, 84, 28, .1)'
                        }
                    ]
                    const colorList = ["#ffd918", "#00dcff"];
                    const series = legend.map((name, index) => {
                        return {
                            name,
                            type: "line",
                            data: y_data[index],
                            smooth: true,
                            lineStyle: {
                                color: colorList[index]
                            },
                            symbolSize: 5,
                            symbol: 'circle',
                            itemStyle: {
                                barBorderRadius: [30, 30, 0, 0],
                                color: colorList[index],
                                borderColor: '#fff'
                            }
                        }
                    })
                    const option = {
                        backgroundColor:  'transparent',
                        tooltip: {
                            trigger: 'axis',
                            confine: true,
                            // extraCssText: "background-color: transparent; padding: 0 5px; border-color: transparent;",
                            formatter: function(params) {
                                let relVal = `${params[0].name}`;
                                let prefix
                                for (let i = 0, l = params.length; i < l; i++) {
                                    prefix = `<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color: ${params[i].color}"></span>`
                                    relVal += '<br/>' + prefix + `增速率` + ' : ' + `${params[i].value} ${dw}`;
                                }
                                return relVal;
                            },
                            axisPointer: {
                                type: 'cross',
                                crossStyle: {
                                    axisPointer: {
                                        type: 'cross',
                                        crossStyle: {
                                            color: '#fff'
                                        },
                                        lineStyle: {
                                            type: 'dashed'
                                        }
                                    }
                                },
                                lineStyle: {
                                    type: 'dashed'
                                }
                            }
                        },
                        grid: {
                            top: showDataZoom ? '20%' : '15%',
                            left: showDataZoom ? '5%' : '2%',
                            right: showDataZoom ?'5%' : '2%',
                            bottom: showDataZoom ? '15%' : '10%',
                            containLabel: true
                        },
                        legend: {
                            x: 'right',
                            y: 'top',
                            padding: [20, 10, 0, 0],
                            itemGap: 10,
                            data: legend,
                            textStyle: {
                                color: '#fff',
                                fontSize: '.12rem'
                            },
                            itemWidth: 10,
                            itemHeight: 4,
                            icon: "rectangle"
                        },
                        xAxis: {
                            type: 'category',
                            data: x_name,
                            axisTick: {
                                show: false,
                            },
                            axisLine: {
                                lineStyle: {
                                    color: 'rgba(255, 255, 255, .05)'
                                }
                            },
                            axisLabel: {
                                margin: 10,
                                fontSize: '.1rem',
                                formatter: "{value}",
                                color: '#fff',
                                rotate: 45
                            }
                        },
                        yAxis: {
                            type: "value",
                            name: '%',
                            nameTextStyle: {
                                color: "#fff",
                                fontSize: "",
                                padding: [0, 0, 0, -20],
                            },
                            show: true,
                            axisTick: {
                                show: false,
                            },
                            axisLine: {
                                show: false,
                                lineStyle: {
                                    color: "rgba(255, 255, 255, .09)"
                                }
                            },
                            splitLine: {
                                show: true,
                                lineStyle: {
                                    color: "rgba(255, 255, 255, .09)"
                                }
                            },
                            axisLabel: {
                                fontSize: '.12rem',
                                color: '#fff'
                            }
                        },
                        dataZoom,
                        series
                    };
                    myChart.setOption(option)
                },

                /**
                 * 绘制用能结构图表
                 */
                drawYNJGChart(showDataZoom = true) {
                    const { right_top } = this.resData;
                    if (!right_top) {
                        return;
                    }
                    const { dw, legend, title, x_name, y_data } = right_top;
                    this.rightTopTitle = title;
                    const myChart = echarts.init(document.getElementById('ynjg'));
                    const yearData = []
                    for (let i = 0; i < x_name.length; i++) {
                        yearData.push(x_name[i])
                    }
                    const seriesData = []
                    const legendKeyMap = {}
                    for (let i = 0; i < legend.length; i++) {
                        legendKeyMap[legend[i]] = y_data[i]
                    }

                    const XJJJ_COLOR = '#32B7CA'
                    const XJGJ_COLOR = '#D3B15F'
                    const JYJJGZ_COLOR = '#8371F0'
                    const JYGJGZ_COLOR = '#CF4A6F'
                    const KZSNY_COLOR = '#2477D1'
                    const JCSS_COLOR = '#20dc47'
                    const colorList = [XJJJ_COLOR, XJGJ_COLOR, JYJJGZ_COLOR,
                        JYGJGZ_COLOR, KZSNY_COLOR, JCSS_COLOR]
                    const type = 0;
                    legend.forEach((name, index) => {
                        seriesData.push({
                            name,
                            type:'bar',
                            barWidth: 11,
                            stack: title,
                            data: legendKeyMap[name],
                            itemStyle: {
                                color: type === 0 ? colorList[index] : colorList[type - 1],
                                areaStyle: {
                                    color: new echarts.graphic.LinearGradient(
                                        0,
                                        0,
                                        0,
                                        1,
                                        [
                                            {
                                                offset: 0,
                                                color: "#000",
                                            },
                                            {
                                                offset: 0.5,
                                                color: "rgba(0, 149, 216, 0)",
                                            },
                                        ],
                                        false
                                    ),
                                }
                            }
                        })
                    })
                    const dataZoom = showDataZoom && [
                        {
                            type: 'slider',
                            startValue: 0,
                            endValue: 7,
                            bottom: '20',
                            left: '30',
                            height: 10,
                            borderColor: '#1479A1',
                            textStyle: {
                                color: '#05D5FF',
                            },
                            backgroundColor: '#032E5C',
                            dataBackground: {
                                lineStyle: { color: 'rgba(250, 84, 28, .3)' },
                                areaStyle: { color: 'rgba(250, 84, 28, .5)' }
                            },
                            moveHandleStyle: {
                                color: 'rgba(38, 203, 251, 1)',
                                borderColor: 'rgba(38, 203, 251, 1)'
                            },
                            fillerColor: 'rgba(250, 84, 28, .1)'
                        }
                    ]
                    const option = {
                        backgroundColor: "transparent",
                        title:{
                            show: false
                        },
                        legend: {
                            top: "2%",
                            left: showDataZoom ? '2%' : '10px',
                            itemGap: 10,
                            data: legend,
                            textStyle: {
                                color: '#fff',
                                fontSize: '.12rem'
                            },
                            itemWidth: 10,
                            itemHeight: 4,
                            icon: "rectangle"
                        },
                        tooltip : {//过滤掉统计的series
                            trigger: 'axis',
                            axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                                type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                            },
                            confine: true,
                            formatter: function (params) {
                                let relVal = params[0].name;
                                let prefix
                                for (let i = 0, l = params.length; i < l; i++) {
                                    prefix = `<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color: ${params[i].color}"></span>`
                                    relVal += '<br/>' + prefix + `${params[i].seriesName}` + ' : ' + `${params[i].value || 0} ${dw}`;
                                }
                                return relVal;
                            },
                        },
                        grid: {
                            top: showDataZoom ? '30%' : '20%',
                            left: showDataZoom ? '3%' : '1%',
                            right: showDataZoom ? '4%' : '1%',
                            bottom: showDataZoom ? '15%' : '5%',
                            containLabel: true
                        },
                        xAxis : [
                            {
                                type : 'category',
                                data : yearData,
                                axisLabel: {
                                    margin: 10,
                                    fontSize: '.1rem',
                                    formatter: "{value}",
                                    color: '#fff',
                                    rotate: 45
                                }
                            }
                        ],
                        yAxis : [
                            {
                                name: dw,
                                nameTextStyle: {
                                    color: "#fff",
                                    fontSize: ".12rem",
                                    padding: [0, 0, 0, -50],
                                },
                                type : 'value',
                                splitLine: {
                                    show: true,
                                    lineStyle: {
                                        color: "rgba(255, 255, 255, .85)"
                                    }
                                },
                                axisLabel: {
                                    margin: 10,
                                    fontSize: '.12rem',
                                    formatter: "{value}",
                                    color: '#fff'
                                }
                            }
                        ],
                        dataZoom,
                        series: seriesData
                    }
                    myChart.setOption(option, true)
                },

                /**
                 * 绘制电气化率图表
                 */
                drawDQHLChart(showDataZoom = true) {
                    const { right_middle } = this.resData;
                    if (!right_middle) {
                        return;
                    }
                    const { legend, title, dw, x_name, y_data } = right_middle;
                    this.rightMiddleTitle = title;
                    const chartContainer = document.getElementById('dqhl');
                    chartContainer.removeAttribute('_echarts_instance_');
                    const myChart = echarts.init(chartContainer);
                    const colorList = ["#FCA805", "#2C87F6"]
                    const yAxis = legend.map((name, index) => {
                        return {
                            type: "value",
                            name: `单位：${dw[index]}`,
                            position: index === 0 ? 'left' : 'right',
                            nameTextStyle: {
                                color: "#fff",
                                fontSize: "",
                                padding: [0, 0, 0, 5],
                            },
                            show: true,
                            axisTick: {
                                show: false,
                            },
                            axisLine: {
                                show: false,
                            },
                            splitLine: {
                                show: index === 0,
                                lineStyle: {
                                    color: "rgba(255, 255, 255, .25)"
                                }
                            },
                            axisLabel: {
                                fontSize: '.12rem',
                                color: '#fff'
                            }
                        }
                    })
                    const series = legend.map((name, index) => {
                        return index === 0 ? {
                            name,
                            type: "bar",
                            yAxisIndex: 0,
                            barWidth: 8,
                            itemStyle: {
                                borderWidth: 2,
                                color: colorList[0],
                                borderRadius: 3
                            },
                            data: y_data[index]
                        } : {
                            name,
                            type: 'line',
                            yAxisIndex: 1,
                            smooth: true,
                            symbolSize: 5,
                            symbol: 'circle',
                            label: {
                                show: false
                            },
                            itemStyle: {
                                borderWidth: 4,
                                color: colorList[index],
                                borderColor: '#fff'
                            },
                            data: y_data[index]
                        }
                    })
                    const dataZoom = showDataZoom && [
                        {
                            type: 'slider',
                            startValue: 0,
                            endValue: 7,
                            bottom: '20',
                            left: '30',
                            height: 10,
                            borderColor: '#1479A1',
                            textStyle: {
                                color: '#05D5FF',
                            },
                            backgroundColor: '#032E5C',
                            dataBackground: {
                                lineStyle: { color: 'rgba(250, 84, 28, .3)' },
                                areaStyle: { color: 'rgba(250, 84, 28, .5)' }
                            },
                            moveHandleStyle: {
                                color: 'rgba(38, 203, 251, 1)',
                                borderColor: 'rgba(38, 203, 251, 1)'
                            },
                            fillerColor: 'rgba(250, 84, 28, .1)'
                        }
                    ]
                    const option = {
                        backgroundColor:  'transparent',
                        tooltip: {
                            trigger: 'axis',
                            confine: true,
                            axisPointer: {
                                type: 'cross',
                                crossStyle: {
                                    axisPointer: {
                                        type: 'cross',
                                        crossStyle: {
                                            color: '#fff'
                                        },
                                        lineStyle: {
                                            type: 'dashed'
                                        }
                                    }
                                },
                                lineStyle: {
                                    type: 'dashed'
                                }
                            }
                        },
                        grid: {
                            top: showDataZoom ? '30%' : '20%',
                            left: showDataZoom ? '5%' : '1%',
                            right: showDataZoom ?'5%' : '1.5%',
                            bottom: showDataZoom ? '15%' : '5%',
                            containLabel: true
                        },
                        legend: {
                            left: showDataZoom ? '5%' : '12px',
                            padding: [20, 30, 0, 0],
                            itemGap: 10,
                            data: legend,
                            textStyle: {
                                color: '#fff',
                                fontSize: '.12rem'
                            },
                            itemWidth: 10,
                            itemHeight: 4,
                            icon: "rectangle"
                        },
                        xAxis: [
                            {
                                type: "category",
                                axisTick: {
                                    show: false,
                                },
                                axisLine: {
                                    lineStyle: {
                                        color: 'rgba(255, 255, 255, .05)'
                                    }
                                },
                                data: x_name,
                                axisLabel: {
                                    margin: 10,
                                    fontSize: '.1rem',
                                    formatter: "{value}",
                                    color: '#fff',
                                    rotate: 45
                                }
                            },
                        ],
                        yAxis,
                        dataZoom,
                        series
                    };
                    myChart.setOption(option)
                },

                /**
                 * 绘制用能强度图表
                 */
                drawYNQDChart(showDataZoom = true) {
                    const { right_bottom } = this.resData;
                    if (!right_bottom) {
                        return;
                    }
                    const { dw, title, x_name, y_data } = right_bottom;
                    this.rightBottomTitle = title;
                    const seriesData = [], year = [];
                    for (let i = 0; i < x_name.length; i++) {
                        seriesData.push(y_data[i])
                        year.push(x_name[i])
                    }
                    const chartContainer = document.getElementById('ynqd');
                    chartContainer.removeAttribute('_echarts_instance_');
                    const myChart = echarts.init(chartContainer);
                    const dataZoom = showDataZoom && [
                        {
                            type: 'slider',
                            startValue: 0,
                            endValue: 7,
                            bottom: '20',
                            left: '30',
                            height: 10,
                            borderColor: '#1479A1',
                            textStyle: {
                                color: '#05D5FF',
                            },
                            backgroundColor: '#032E5C',
                            dataBackground: {
                                lineStyle: { color: 'rgba(250, 84, 28, .3)' },
                                areaStyle: { color: 'rgba(250, 84, 28, .5)' }
                            },
                            moveHandleStyle: {
                                color: 'rgba(38, 203, 251, 1)',
                                borderColor: 'rgba(38, 203, 251, 1)'
                            },
                            fillerColor: 'rgba(250, 84, 28, .1)'
                        }
                    ]
                    const option = {
                        backgroundColor:  'transparent',
                        tooltip: {
                            trigger: 'axis',
                            confine: true,
                            formatter: function(params){
                                let relVal = `${params[0].name}`;
                                let prefix
                                for (let i = 0, l = params.length; i < l; i++) {
                                    prefix = `<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color: ${params[i].color}"></span>`
                                    relVal += '<br/>' + prefix + `${params[i].seriesName}` + ' : ' + `${params[i].value} ${dw}`;
                                }
                                return relVal;
                            },
                            axisPointer: {
                                type: 'cross',
                                crossStyle: {
                                    axisPointer: {
                                        type: 'cross',
                                        crossStyle: {
                                            color: '#fff'
                                        },
                                        lineStyle: {
                                            type: 'dashed'
                                        }
                                    }
                                },
                                lineStyle: {
                                    type: 'dashed'
                                }
                            }
                        },
                        grid: {
                            top: showDataZoom ? '30%' : '20%',
                            left: showDataZoom ? '5%' : '2%',
                            right: showDataZoom ?'5%' : '2%',
                            bottom: showDataZoom ? '15%' : '5%',
                            containLabel: true
                        },
                        xAxis: [
                            {
                                type: "category",
                                axisTick: {
                                    show: true
                                },
                                axisLine: {
                                    lineStyle: {
                                        color: 'rgba(255, 255, 255, .05)'
                                    }
                                },
                                data: year,
                                axisLabel: {
                                    margin: 10,
                                    fontSize: '.1rem',
                                    formatter: "{value}",
                                    color: '#fff',
                                    rotate: 45
                                }
                            },
                        ],
                        yAxis: {
                            type: "value",
                            name: `单位：${dw}`,
                            position: 'left',
                            nameTextStyle: {
                                color: "#fff",
                                fontSize: "",
                                padding: [0, 0, 0, 0],
                            },
                            show: true,
                            axisTick: {
                                show: false,
                            },
                            axisLine: {
                                show: false,
                            },
                            splitLine: {
                                show: true,
                                lineStyle: {
                                    color: "rgba(255, 255, 255, .85)"
                                }
                            },
                            axisLabel: {
                                fontSize: '.12rem',
                                color: '#fff'
                            }
                        },
                        dataZoom,
                        series: {
                            name: "用能强度",
                            type: "bar",
                            barWidth: 11,
                            itemStyle: {
                                borderWidth: 1,
                                color: '#0B7062',
                                borderColor: '#15FED1'
                            },
                            data: seriesData,
                        }
                    };
                    myChart.setOption(option)
                },

                handleYNQDToggle(yndqActive) {
                    this.mold = yndqActive
                    this.handleChange();
                },

                /**
                 * 绘制地图
                 */
                drawMapChart() {
                    const { map } = this.resData;
                    const { dw, maps, title, value } = map;
                    this.mapTitle = title;
                    this.mapUnit = dw;
                    this.mapValue = value.toString().split("");
                    const tooltipDw = maps.length > 0 ? maps[0].dw : "";
                    const that = this;
                    const mapsKeyMap = {}
                    let min = 0, max = 0;
                    maps.forEach(item => {
                        if (!min || item.value < min) {
                            min = item.value;
                        }
                        if (!max || item.value > max) {
                            max = item.value;
                        }
                        mapsKeyMap[item.region] = item;
                    })
                    const myChart = echarts.getInstanceById('mapContainer') || echarts.init(document.getElementById('mapContainer'))
                    const currentYear = this.year;
                    const loadMap = (features, mapData, zoom, provinceName) => {
                        const geoCoordMap = {}
                        features.forEach(item => {
                            const {properties} = item
                            const {cp, name} = properties
                            geoCoordMap[name] = cp
                        })
                        const option = {
                            silent: false,
                            tooltip: {
                                trigger: "item",
                                show: true,
                                textStyle: {
                                    fontSize: 14,
                                    color: "#fff",
                                },
                                borderWidth: 3,
                                borderColor: 'rgba(10, 113, 174, 0.8)',
                                backgroundColor: "rgba(0, 0, 0, 0.8)",
                                extraCssText: "padding: 0;",
                                formatter: function (params) {
                                    if (params.data) {
                                        return `
                                        <div class="map-tooltip">
                                            <div class="map-tooltip-header" style="border-bottom: 1px solid #5CB2E3; height: 40px; display: flex;align-items: center; padding: 0 10px;">
                                                <div class="header-icon" style="width: 5px;height: 5px; border-radius: 50%; background: #1CD5FF; margin-right: 5px;"></div>
                                                <div class="header-text">${ params.data.name }</div>
                                            </div>
                                            <div class="map-tooltip-content" style="padding: 10px 10px 10px 18px;">
                                                <div class="content-item">年度: ${currentYear}年</div>
                                                <div class="content-item">${title}: <span style="color: #FBEE16;font-weight: 600;">${params.data.value.length > 1 ? params.data.value[params.data.value.length - 1] : params.data.value}</span> ${tooltipDw}</div>
                                            </div>
                                        </div>
                                    `
                                    } else {
                                        return ''
                                    }
                                }
                            },
                            geo: {
                                map: provinceName,
                                roam: false,
                                zoom,
                                itemStyle: {
                                    borderColor: '#84B2FD',
                                    color: 'transparent',
                                    borderWidth: 8,
                                },
                                regions: [
                                    {
                                        name: '南海诸岛',
                                        itemStyle: {
                                            normal: {
                                                opacity: 0
                                            }
                                        },
                                        label: {
                                            show: false
                                        }
                                    }
                                ]
                            },
                            visualMap: {
                                min,
                                max,
                                calculable: true,
                                inRange: {
                                    color: ['#115C9E', '#16EB9C']
                                },
                                padding: [0, 0, 50, 50],
                                textStyle: {
                                    color: '#fff'
                                },
                                text: ['高', '低'],
                            },
                            series: [{
                                map: provinceName,
                                type: 'map',
                                zoom,
                                roam: false,
                                coordinateSystem: 'geo',
                                selectedMode: 'single',
                                showLegendSymbol: true,
                                itemStyle: {
                                    borderWidth: 1,
                                    borderColor: '#84B2FD',
                                    color: 'transparent'
                                },
                                data: mapData,
                                emphasis: {
                                    //当鼠标放上去  地区区域是否显示名称
                                    label: {
                                        show: true,
                                        color: "#fff",
                                        backgroundColor: "rgba(0, 0, 0, .25)",
                                    },
                                    itemStyle: {
                                        color: '#fcf565'
                                    },
                                },
                                select: {
                                    label: {
                                        show: true,
                                        color: "#fff"
                                    }
                                },
                                label: {
                                    show: true,
                                    color: '#fff',
                                    position: 'top',
                                    fontSize: 12,
                                    padding: 10
                                }
                            }]
                        }
                        myChart.setOption(option)
                    }
                    if (this.region === "china") {
                        $.get(`../assets/mapJson/全国.json`, function (data) {
                            // echarts.registerMap('china', data) 显示南海九段线
                            echarts.getMap("china").geoJson.features;
                            loadMap(data.features, data.features.map(item => {
                                if (mapsKeyMap.hasOwnProperty(item.properties.name)) {
                                    return {
                                        name: item.properties.name,
                                        value: mapsKeyMap[item.properties.name].value
                                    }
                                } else {
                                    return {
                                        name: item.properties.name,
                                        value: 0
                                    }
                                }
                            }), 1.2, 'china')
                        })
                        myChart.on('click',  params => {
                            const { name: provinceName } = params;
                            this.region = provinceName
                            this.handleChange();
                        })
                    } else {
                        $.get(`../assets/mapJson/${that.region}.json`, function (data) {
                            echarts.registerMap(that.region, data);
                            loadMap(data.features, data.features.map(item => {
                                if (mapsKeyMap.hasOwnProperty(item.properties.name)) {
                                    return {
                                        name: item.properties.name,
                                        value: mapsKeyMap[item.properties.name].value
                                    }
                                } else {
                                    return {
                                        name: item.properties.name,
                                        value: 0
                                    }
                                }
                            }), 0.9, that.region)
                        })
                    }
                },

                handleMapChina() {
                    this.region = 'china';
                    this.handleChange();
                },

                handleDqClick(dq) {
                    this.dq = dq;
                    this.handleChange();
                },

                handleNavClick(item) {
                    window.location.href = item.location;
                },

                handleCompareAnalysisClick() {
                    window.location.href = `compare-analysis.html?type=${this.region}`
                },

                handleCollapseClick(field) {
                    const itemField = `collapse${field}`
                    const collapseEl = $(`.${itemField}`).parents('.collapse-item-wrap');
                    const height = collapseEl.height()
                    const offset = collapseEl.offset();
                    const mapContainerEl = $("#mapContainer");
                    const leftPosKeyMap = {
                        "NHZL": {
                            height: `${height + 100}px`,
                            top: `${offset.top}px`,
                        },
                        "YNZB": {
                            height: `${height + 100}px`,
                            top: `${offset.top - 100}px`,
                        },
                        "YNZS": {
                            height: `${height + 100}px`,
                            top: `${offset.top - 100}px`,
                        }
                    }
                    const rightPosKeyMap = {
                        "YNJG": {
                            height: `${height + 100}px`,
                            top: `${offset.top}px`,
                        },
                        "DQHL": {
                            height: `${height + 100}px`,
                            top: `${offset.top - 100}px`,
                        },
                        "YNQD": {
                            height: `${height + 100}px`,
                            top: `${offset.top - 100}px`,
                        }
                    }
                    if (this[itemField]) {
                        this[`${itemField}Width`] = collapseEl.width();
                        this[`${itemField}Height`] = collapseEl.height();
                        this[`${itemField}Top`] = offset.top;
                        this[itemField] = false;
                        this.showMask = true;
                        if (leftPosKeyMap.hasOwnProperty(field)) {
                            const { height, top } = leftPosKeyMap[field]
                            collapseEl.css({
                                position: 'fixed',
                                height,
                                top,
                                left: `${offset.left}px`,
                                zIndex: 2000,
                                backdropFilter: 'blur(300px)'
                            })
                        } else {
                            const { height, top } = rightPosKeyMap[field]
                            collapseEl.css({
                                position: 'fixed',
                                height,
                                top,
                                right: '11px',
                                zIndex: 2000,
                                backdropFilter: 'blur(300px)'
                            })
                        }
                        this.loadChart[field] = false;
                        collapseEl.stop().animate({
                            width: `${mapContainerEl.offset().left - 15 + mapContainerEl.width()}`
                        }, 200)
                        setTimeout(() => {
                            this.loadChart[field] = true;
                            this.$nextTick(() => {
                                this[`draw${field}Chart`](false);
                            })
                        }, 200)
                    } else {
                        this[itemField] = true;
                        this.showMask = false;
                        collapseEl.css({
                            backgroundColor: 'transparent'
                        })
                        this.loadChart[field] = false;
                        collapseEl.stop().animate({
                            position: 'static',
                            width: this[`${itemField}Width`],
                            height: this[`${itemField}Height`],
                            top: this[`${itemField}Top`],
                            zIndex: 0
                        }, 200)
                        setTimeout(() => {
                            this.loadChart[field] = true;
                            this.$nextTick(() => {
                                this[`draw${field}Chart`]();
                            })
                        }, 200)
                    }
                },

                fullScreenClick() {
                    const isFullScreen = () => {
                        return !! (
                            document.fullscreen ||
                            document.mozFullScreen ||
                            document.webkitIsFullScreen ||
                            document.webkitFullScreen ||
                            document.msFullScreen
                        );
                    }
                    const de = document.documentElement;
                    if (!isFullScreen()) {
                        if (de.requestFullscreen) {
                            de.requestFullscreen();
                        } else if (de.mozRequestFullScreen) {
                            de.mozRequestFullScreen();
                        } else if (de.webkitRequestFullScreen) {
                            de.webkitRequestFullScreen();
                        }
                    } else {
                        if(document.exitFullscreen) {
                            document.exitFullscreen();
                        } else if(document.mozCancelFullScreen) {
                            document.mozCancelFullScreen();
                        } else if(document.webkitExitFullscreen) {
                            document.webkitExitFullscreen();
                        }
                    }
                },

                modelClick() {
                    window.open('model.html')
                },

                handleHomeClick() {
                    window.location.href = 'index.html'
                },

                handleCateClick(cate) {
                    this.cate = cate;
                    this.handleChange();
                },

                handleChange() {
                    const loading = this.$loading({
                        text: "数据加载中...",
                        background: 'rgba(0, 0, 0, 0.25)'
                    });
                    const { year, cate, type, mold } = this;
                    const dq = this.dq;
                    const that = this;
                    let region;
                    if (this.region !== "china") {
                        if (this.region.indexOf("市") > -1) {
                            region = this.region.replace("市", "")
                        } else if (this.region.indexOf("省") > -1) {
                            region = this.region.replace("省", "")
                        } else if (this.region.indexOf("自治区") > -1) {
                            const keyMap = {
                                "内蒙古自治区": "内蒙古",
                                "广西壮族自治区": "广西",
                                "西藏自治区": "西藏",
                                "宁夏回族自治区": "宁夏",
                                "新疆维吾尔自治区": "新疆"
                            }
                            region = keyMap[this.region]
                        } else {
                            region = this.region;
                        }
                    }
                    $.get(`${severUrl}/Newxz/index`, {
                        year,
                        cate,
                        dq,
                        type,
                        mold,
                        region,
                        isfirst: 0,
                    }, function(data) {
                        loading.close();
                        that.resData = data;
                        that.drawNHZLChart();
                        that.drawYNZBChart();
                        that.drawYNZSChart();
                        that.drawYNJGChart();
                        that.drawDQHLChart();
                        that.drawYNQDChart(that.collapseYNQD);
                        that.drawMapChart();
                    })
                }
            },
            computed: {
                navLeft() {
                    return this.navList.slice(0, 4)
                },
                navRight() {
                    return this.navList.slice(4)
                },
                yearOptions() {
                    const yearOptions = []
                    for (let i = 2005; i <= 2021; i++) {
                        yearOptions.push(i)
                    }
                    return yearOptions
                }
            },
            watch: {
                cate: {
                    immediate: true,
                    handler(cate) {
                        if (cate === '1') {
                            this.cateLeftBtnClass = 'energy-group-item energy-group-item--active'
                            this.cateRightBtnClass = 'energy-group-item left-active'
                        } else {
                            this.cateLeftBtnClass = 'energy-group-item right-active'
                            this.cateRightBtnClass = 'energy-group-item energy-group-item--active'
                        }
                    }
                },
                dq: {
                    immediate: true,
                    handler(dq) {
                        if (dq === '1') {
                            this.leftBtnClass = 'area-group-item area-group-item--active'
                            this.rightBtnClass = 'area-group-item left-active'
                        } else {
                            this.leftBtnClass = 'area-group-item right-active'
                            this.rightBtnClass = 'area-group-item area-group-item--active'
                        }
                    }
                }
            },
            mounted() {
                this.year = this.yearOptions.length && this.yearOptions[this.yearOptions.length - 1];
                this.$nextTick(() => {
                    const that = this;
                    const { year, cate, type, mold } = this;
                    const dq = this.region === 'china' ? '1' : '2';
                    const loading = this.$loading({
                        text: "数据加载中...",
                        background: 'rgba(0, 0, 0, 0.25)'
                    });
                    $.get(`${severUrl}/Newxz/index`, {
                        year,
                        cate,
                        dq,
                        type,
                        mold,
                        isfirst: 1
                    }, function(data) {
                        loading.close();
                        that.resData = data;
                        that.drawNHZLChart();
                        that.drawYNZBChart();
                        that.drawYNZSChart();
                        that.drawYNJGChart();
                        that.drawDQHLChart();
                        that.drawYNQDChart();
                        that.drawMapChart();
                    })
                })
            }
        })
    </script>
</body>
</html>
